# HTML5离线存储

- 在用户没有网络连接时，可以正常访问站点或应用，在用户与网络连接的时候，更新用户机器上的缓存文件

## 原理

基于一个新建的`.appcache`文件的缓存机制（不是存储技术），通过这个文件上的解析清单离线存储资源，这些资源就会像`Cookie`一样被存储下来。之后当网络处于离线状态下时，浏览器会通过被离线存储的数据进行页面展示

## 使用

- 在头部下面加入一个`manifest`属性
- 在`cache.manifest`文件编写离线存储的资源
- 在离线状态时，操作`window.applicationCache`进行需求实现

## 如何管理加载

**在线情况下**，浏览器发现`HTML`头部有`manifest`属性，他会请求`manifest`文件，如果是第一次访问`app`，那么浏览器就会根据`manifest`文件的内容下载相应的资源并且进行离线存储。如果已经访问过`app`并且对离线存储了，那么浏览器就会使用离线的资源加载页面，然后浏览器会对比新的`manifest`文件与旧的`manifest`文件，如果没有改变，就不做任何操作，如果文件改变了，那么就会重新下载文件并进行离线存储

**离线情况下**，浏览器就直接使用离线存储的资源